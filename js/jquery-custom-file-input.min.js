!function(t){var e="undefined"!=typeof t("<input/>")[0].multiple,i=/msie/i.test(navigator.userAgent);t.fn.customFile=function(){return this.each(function(){var n=t(this).addClass("customfile"),l=t('<div class="customfile-wrap">'),a=t('<input type="text" class="customfile-filename" />'),u=t('<button type="button" class="customfile-upload">Open</button>'),o=t('<label class="customfile-upload" for="'+n[0].id+'">Open</label>');n.css({position:"absolute",left:"-9999px"}),l.insertAfter(n).append(n,a,i?o:u),n.attr("tabIndex",-1),u.attr("tabIndex",-1),u.click(function(){n.focus().click()}),n.change(function(){var t,i,l=[];if(e){t=n[0].files;for(var u=0,o=t.length;o>u;u++)l.push(t[u].name);i=l.join(", ")}else i=n.val().split("\\").pop();a.val(i).attr("title",i).focus()}),a.on({blur:function(){n.trigger("blur")},keydown:function(t){if(13===t.which)i||n.trigger("click");else{if(8!==t.which&&46!==t.which)return 9===t.which?void 0:!1;n.replaceWith(n=n.clone(!0)),n.trigger("change"),a.val("")}}})})},e||t(document).on("change","input.customfile",function(){var e=t(this),i="customfile_"+(new Date).getTime(),n=e.parent(),l=n.siblings().find(".customfile-filename").filter(function(){return!this.value}),a=t('<input type="file" id="'+i+'" name="'+e.attr("name")+'"/>');setTimeout(function(){e.val()?l.length||(n.after(a),a.customFile()):(l.parent().remove(),n.appendTo(n.parent()),n.find("input").focus())},1)})}(jQuery);